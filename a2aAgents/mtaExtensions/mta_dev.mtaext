_schema-version: "3.3"
ID: a2a-agent-platform-dev
extends: a2a-agent-platform

# Development environment specific parameters
parameters:
  app-name: a2a-agents-dev
  service-name: a2a-dev
  log-level: debug
  hana-plan: hdi-shared
  postgres-plan: development
  redis-plan: development
  ans-plan: free

# Module overrides for development
modules:
  - name: a2a-backend
    parameters:
      instances: 1
      memory: 1024M
      disk-quota: 1024M
    properties:
      NODE_ENV: development
      DEBUG: true
      ENABLE_PROFILING: true
      ENABLE_SWAGGER: true
      CORS_ALLOWED_ORIGINS: "*"
      DATABASE_POOL_MIN: 2
      DATABASE_POOL_MAX: 10
      RATE_LIMIT_ENABLED: false
      CACHE_TTL: 300
    env:
      GROK_API_URL: https://api.x.ai/v1/chat/completions
      PERPLEXITY_API_URL: https://api.perplexity.ai
      ENABLE_MOCK_SERVICES: true

  - name: a2a-frontend
    parameters:
      memory: 128M
    build-parameters:
      commands:
        - npm install
        - npm run build:dev
    env:
      SAP_UI5_VERSION: latest
      ENABLE_DEBUG_MODE: true

  - name: a2a-approuter
    parameters:
      instances: 1
      memory: 128M
    properties:
      SESSION_TIMEOUT: 3600
      ENABLE_CORS: true
      LOG_REMOTE_USER: true
      COMPRESSION: false
    env:
      DEBUG: xssec*,approuter*

# Development-specific resources
resources:
  - name: a2a-hana-hdi
    properties:
      enable-debug: true
      max-connections: 50

  - name: a2a-redis
    parameters:
      config:
        maxmemory: 256mb
        maxmemory-policy: allkeys-lru
        timeout: 300

  - name: a2a-xsuaa
    parameters:
      config:
        foreign-scope-references:
          - $ACCEPT_GRANTED_SCOPES
        oauth2-configuration:
          token-validity: 3600
          refresh-token-validity: 86400
          system-attributes:
            - rolecollections
          credential-types:
            - binding-secret
            - x509