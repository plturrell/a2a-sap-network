/* 
 * Consistent Loading States - SAP Fiori Compliant
 * Standardized loading animations and states using design tokens
 */

/* ========================================
   Base Loading Styles
   ======================================== */

.sapUiLoadingIndicator {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--sapContent_Padding);
    font-family: var(--sapFontFamily);
}

.sapUiLoadingOverlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--sapLoading_Background);
    backdrop-filter: blur(1px);
    z-index: var(--sapContent_ZIndex_BusyIndicator);
}

.sapUiLoadingText {
    color: var(--sapContent_LabelColor);
    font-size: var(--sapFontSize);
    text-align: center;
    margin-top: var(--sapContent_Padding);
}

/* ========================================
   Size Variants
   ======================================== */

.sapUiLoadingSmall {
    width: 1.5rem;
    height: 1.5rem;
    font-size: var(--sapFontSmallSize);
}

.sapUiLoadingMedium {
    width: 3rem;
    height: 3rem;
    font-size: var(--sapFontSize);
}

.sapUiLoadingLarge {
    width: 4.5rem;
    height: 4.5rem;
    font-size: var(--sapFontLargeSize);
}

/* ========================================
   Spinner Loading (Default)
   ======================================== */

.sapUiSpinner {
    display: inline-block;
    animation: sapSpinnerRotate var(--sapLoading_Shimmer_Duration) linear infinite;
}

.sapUiSpinnerCircle {
    animation: sapSpinnerDash var(--sapLoading_Shimmer_Duration) ease-in-out infinite;
    stroke: var(--sapBrandColor);
    stroke-linecap: round;
}

@keyframes sapSpinnerRotate {
    100% {
        transform: rotate(360deg);
    }
}

@keyframes sapSpinnerDash {
    0% {
        stroke-dasharray: 1, 150;
        stroke-dashoffset: 0;
    }
    50% {
        stroke-dasharray: 90, 150;
        stroke-dashoffset: -35;
    }
    100% {
        stroke-dasharray: 90, 150;
        stroke-dashoffset: -124;
    }
}

/* ========================================
   Dots Loading
   ======================================== */

.sapUiLoadingDots {
    display: inline-flex;
    gap: 0.25rem;
    align-items: center;
}

.sapUiLoadingDot {
    width: 0.5rem;
    height: 0.5rem;
    background-color: var(--sapBrandColor);
    border-radius: 50%;
    animation: sapDotsAnimation var(--sapLoading_Shimmer_Duration) ease-in-out infinite;
}

.sapUiLoadingDot:nth-child(1) {
    animation-delay: 0ms;
}

.sapUiLoadingDot:nth-child(2) {
    animation-delay: 200ms;
}

.sapUiLoadingDot:nth-child(3) {
    animation-delay: 400ms;
}

@keyframes sapDotsAnimation {
    0%, 20%, 80%, 100% {
        transform: scale(1);
        opacity: 0.5;
    }
    50% {
        transform: scale(1.2);
        opacity: 1;
    }
}

/* Larger dots for bigger sizes */
.sapUiLoadingLarge .sapUiLoadingDot {
    width: 0.75rem;
    height: 0.75rem;
}

.sapUiLoadingSmall .sapUiLoadingDot {
    width: 0.375rem;
    height: 0.375rem;
}

/* ========================================
   Pulse Loading
   ======================================== */

.sapUiLoadingPulse {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.sapUiPulseRing {
    position: absolute;
    border: 2px solid var(--sapBrandColor);
    border-radius: 50%;
    animation: sapPulseAnimation var(--sapLoading_Pulse_Duration) cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
}

.sapUiPulseRing:nth-child(1) {
    animation-delay: 0s;
}

.sapUiPulseRing:nth-child(2) {
    animation-delay: 0.5s;
}

.sapUiPulseRing:nth-child(3) {
    animation-delay: 1s;
}

@keyframes sapPulseAnimation {
    0% {
        width: 0;
        height: 0;
        opacity: 1;
    }
    100% {
        width: 100%;
        height: 100%;
        opacity: 0;
    }
}

/* ========================================
   Skeleton Loading
   ======================================== */

.sapUiLoadingSkeleton {
    width: 100%;
    max-width: 300px;
    padding: var(--sapContent_Padding);
}

.sapUiSkeletonLine {
    height: 1rem;
    background: linear-gradient(
        90deg,
        var(--sapLoading_Skeleton_Base) 25%,
        var(--sapLoading_Skeleton_Highlight) 50%,
        var(--sapLoading_Skeleton_Base) 75%
    );
    background-size: 200% 100%;
    border-radius: var(--sapElement_BorderCornerRadius);
    margin-bottom: 0.5rem;
    animation: sapSkeletonShimmer var(--sapLoading_Shimmer_Duration) ease-in-out infinite;
}

.sapUiSkeletonLineTitle {
    width: 60%;
    height: 1.5rem;
}

.sapUiSkeletonLineSubtitle {
    width: 80%;
    height: 1rem;
}

.sapUiSkeletonLineText {
    width: 100%;
    height: 0.875rem;
}

.sapUiSkeletonLineTextShort {
    width: 40%;
    height: 0.875rem;
}

@keyframes sapSkeletonShimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

/* ========================================
   Progress Loading
   ======================================== */

.sapUiLoadingProgress {
    width: 100%;
    max-width: 200px;
    text-align: center;
}

.sapUiProgressTrack {
    width: 100%;
    height: 0.5rem;
    background-color: var(--sapField_Background);
    border: 1px solid var(--sapField_BorderColor);
    border-radius: var(--sapElement_BorderCornerRadius);
    overflow: hidden;
    position: relative;
}

.sapUiProgressFill {
    height: 100%;
    background: linear-gradient(
        90deg,
        var(--sapBrandColor),
        var(--sapHighlightColor),
        var(--sapBrandColor)
    );
    background-size: 200% 100%;
    border-radius: var(--sapElement_BorderCornerRadius);
    transition: width var(--sapAnimationDuration_Default) var(--sapAnimationTimingFunction_Default);
    animation: sapProgressShimmer 2s linear infinite;
}

.sapUiProgressText {
    color: var(--sapContent_LabelColor);
    font-size: var(--sapFontSmallSize);
    margin-top: 0.5rem;
    font-variant-numeric: tabular-nums;
}

@keyframes sapProgressShimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

/* ========================================
   Shimmer Loading
   ======================================== */

.sapUiLoadingShimmer {
    width: 100%;
    max-width: 250px;
    padding: var(--sapContent_Padding);
}

.sapUiShimmerBlock {
    background: linear-gradient(
        90deg,
        var(--sapLoading_Skeleton_Base) 25%,
        var(--sapLoading_Skeleton_Highlight) 50%,
        var(--sapLoading_Skeleton_Base) 75%
    );
    background-size: 200% 100%;
    border-radius: var(--sapElement_BorderCornerRadius);
    margin-bottom: 0.75rem;
    animation: sapSkeletonShimmer var(--sapLoading_Shimmer_Duration) ease-in-out infinite;
}

.sapUiShimmerBlockLarge {
    width: 100%;
    height: 3rem;
}

.sapUiShimmerBlockMedium {
    width: 80%;
    height: 2rem;
}

.sapUiShimmerBlockSmall {
    width: 60%;
    height: 1.5rem;
}

/* ========================================
   Speed Variants
   ======================================== */

.sapUiLoadingFast .sapUiSpinner {
    animation-duration: 0.8s;
}

.sapUiLoadingFast .sapUiSpinnerCircle {
    animation-duration: 0.8s;
}

.sapUiLoadingFast .sapUiLoadingDot {
    animation-duration: 1s;
}

.sapUiLoadingFast .sapUiPulseRing {
    animation-duration: 1.5s;
}

.sapUiLoadingSlow .sapUiSpinner {
    animation-duration: 3s;
}

.sapUiLoadingSlow .sapUiSpinnerCircle {
    animation-duration: 3s;
}

.sapUiLoadingSlow .sapUiLoadingDot {
    animation-duration: 2.5s;
}

.sapUiLoadingSlow .sapUiPulseRing {
    animation-duration: 4s;
}

/* ========================================
   Context-Specific Loading States
   ======================================== */

/* Agent Status Loading */
.sapUiAgentStatusLoading {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--sapContent_LabelColor);
}

.sapUiAgentStatusLoading::before {
    content: "";
    width: 1rem;
    height: 1rem;
    border: 2px solid var(--sapField_BorderColor);
    border-top: 2px solid var(--sapBrandColor);
    border-radius: 50%;
    animation: sapSpinnerRotate 1s linear infinite;
}

/* Data Loading State */
.sapUiDataLoading {
    padding: var(--sapContent_Padding);
    text-align: center;
    color: var(--sapContent_LabelColor);
    background: var(--sapGroup_ContentBackground);
    border: 1px solid var(--sapGroup_ContentBorderColor);
    border-radius: var(--sapElement_BorderCornerRadius);
}

/* Chart Loading State */
.sapUiChartLoading {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 200px;
    background: var(--sapGroup_ContentBackground);
    border: 1px solid var(--sapGroup_ContentBorderColor);
    border-radius: var(--sapElement_BorderCornerRadius);
}

/* ========================================
   Dark Theme Adjustments
   ======================================== */

[data-sap-ui-theme^="sap_horizon_dark"] .sapUiSpinnerCircle {
    stroke: var(--sapBrandColor);
}

[data-sap-ui-theme^="sap_horizon_dark"] .sapUiLoadingDot {
    background-color: var(--sapBrandColor);
}

[data-sap-ui-theme^="sap_horizon_dark"] .sapUiPulseRing {
    border-color: var(--sapBrandColor);
}

[data-sap-ui-theme^="sap_horizon_dark"] .sapUiSkeletonLine {
    background: linear-gradient(
        90deg,
        var(--sapLoading_Skeleton_Base) 25%,
        var(--sapLoading_Skeleton_Highlight) 50%,
        var(--sapLoading_Skeleton_Base) 75%
    );
}

[data-sap-ui-theme^="sap_horizon_dark"] .sapUiShimmerBlock {
    background: linear-gradient(
        90deg,
        var(--sapLoading_Skeleton_Base) 25%,
        var(--sapLoading_Skeleton_Highlight) 50%,
        var(--sapLoading_Skeleton_Base) 75%
    );
}

/* ========================================
   High Contrast Theme Adjustments
   ======================================== */

[data-sap-ui-theme^="sap_horizon_hc"] .sapUiSpinnerCircle {
    stroke: var(--sapBrandColor);
    stroke-width: 3px;
}

[data-sap-ui-theme^="sap_horizon_hc"] .sapUiLoadingDot {
    background-color: var(--sapBrandColor);
    border: 1px solid var(--sapTextColor);
}

[data-sap-ui-theme^="sap_horizon_hc"] .sapUiPulseRing {
    border-width: 3px;
}

/* ========================================
   Reduced Motion Accessibility
   ======================================== */

@media (prefers-reduced-motion: reduce) {
    .sapUiSpinner,
    .sapUiSpinnerCircle,
    .sapUiLoadingDot,
    .sapUiPulseRing,
    .sapUiSkeletonLine,
    .sapUiShimmerBlock,
    .sapUiProgressFill {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
    }
    
    /* Show static loading indicator for users who prefer reduced motion */
    .sapUiLoadingIndicator[data-reduced-motion] .sapUiSpinner::after {
        content: "⏳";
        font-size: 1.5em;
        display: block;
        text-align: center;
    }
}