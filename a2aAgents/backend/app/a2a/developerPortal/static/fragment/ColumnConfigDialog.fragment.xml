<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
    <Dialog title="{i18n>configureColumns}" 
            contentWidth="500px" 
            contentHeight="400px"
            resizable="true"
            draggable="true"
            class="a2a-column-config-dialog">
        <content>
            <VBox class="sapUiMediumMargin">
                <Text text="{i18n>selectVisibleColumns}" 
                      class="sapUiMediumMarginBottom"/>
                      
                <!-- Column Configuration List -->
                <List items="{columnConfig>/columns}"
                      mode="None"
                      includeItemInSelection="false"
                      class="a2a-column-config-list">
                    <CustomListItem class="a2a-column-config-item">
                        <content>
                            <HBox alignItems="Center" 
                                  justifyContent="SpaceBetween"
                                  width="100%">
                                <VBox>
                                    <Text text="{columnConfig>label}" 
                                          class="sapMListItemText"/>
                                    <Text text="Column {columnConfig>index}" 
                                          class="sapMListItemTextSecondary"/>
                                </VBox>
                                <Switch state="{columnConfig>visible}"
                                       change="onColumnVisibilityChange"
                                       customTextOn="{i18n>show}"
                                       customTextOff="{i18n>hide}"/>
                            </HBox>
                        </content>
                    </CustomListItem>
                </List>
                
                <!-- Preview Section -->
                <Panel headerText="{i18n>preview}" 
                       class="sapUiMediumMarginTop"
                       expandable="true"
                       expanded="false">
                    <content>
                        <Text text="{i18n>previewDescription}" 
                              class="sapUiMediumMargin"/>
                              
                        <!-- Mini preview table -->
                        <Table items="{columnConfig>/columns}"
                               growing="false"
                               class="a2a-preview-table">
                            <headerToolbar>
                                <Toolbar>
                                    <Title text="{i18n>previewTable}"/>
                                </Toolbar>
                            </headerToolbar>
                            <columns>
                                <Column visible="{columnConfig>visible}">
                                    <Text text="{columnConfig>label}"/>
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem>
                                    <cells>
                                        <Text text="Sample Data" visible="{columnConfig>visible}"/>
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </content>
                </Panel>
            </VBox>
        </content>
        <beginButton>
            <Button text="{i18n>save}" 
                    type="Emphasized" 
                    press="onSaveColumnConfig"
                    icon="sap-icon://accept"/>
        </beginButton>
        <endButton>
            <Button text="{i18n>cancel}" 
                    press="onCancelColumnConfig"
                    icon="sap-icon://cancel"/>
        </endButton>
        <buttons>
            <Button text="{i18n>reset}" 
                    press="onResetColumnConfig"
                    icon="sap-icon://reset"/>
        </buttons>
    </Dialog>
</core:FragmentDefinition>