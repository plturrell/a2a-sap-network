<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core">
    
    <Dialog
        title="Webhook Subscriptions"
        contentWidth="90%"
        maxWidth="35rem"
        contentHeight="500px"
        class="a2a-tablet-dialog"
        resizable="true">
        
        <content>
            <Table
                items="{webhooks>/subscriptions}"
                mode="Delete"
                delete=".onDeleteWebhook">
                
                <headerToolbar>
                    <OverflowToolbar>
                        <Title text="Active Webhooks" />
                        <ToolbarSpacer />
                        <Button
                            text="Add Webhook"
                            icon="sap-icon://add"
                            press=".onAddWebhook" />
                    </OverflowToolbar>
                </headerToolbar>
                
                <columns>
                    <Column>
                        <Text text="Event Type" />
                    </Column>
                    <Column minScreenWidth="Tablet">
                        <Text text="Webhook URL" />
                    </Column>
                    <Column minScreenWidth="Desktop">
                        <Text text="Status" />
                    </Column>
                    <Column minScreenWidth="Desktop">
                        <Text text="Created" />
                    </Column>
                </columns>
                
                <items>
                    <ColumnListItem>
                        <cells>
                            <Text text="{webhooks>event_type}" />
                            <Link
                                text="{webhooks>webhook_url}"
                                href="{webhooks>webhook_url}"
                                target="_blank" />
                            <ObjectStatus
                                text="{= ${webhooks>active} ? 'Active' : 'Paused'}"
                                state="{= ${webhooks>active} ? 'Success' : 'Warning'}" />
                            <Text text="{
                                path: 'webhooks>created_at',
                                formatter: '.formatDateTime'
                            }" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
        
        <endButton>
            <Button
                text="Close"
                press=".onCloseWebhooks" />
        </endButton>
    </Dialog>
</core:FragmentDefinition>