<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>A2A Agent Tiles Test</title>
    <script
        id="sap-ui-bootstrap"
        src="https://ui5.sap.com/1.120.0/resources/sap-ui-core.js"
        data-sap-ui-theme="sap_fiori_3"
        data-sap-ui-libs="sap.m,sap.ui.core"
        data-sap-ui-async="true">
    </script>
</head>
<body class="sapUiBody">
    <div id="content"></div>

    <script>
        sap.ui.getCore().attachInit(function() {
            // Create tiles for first 4 agents as test
            var vBox = new sap.m.VBox({
                items: [
                    new sap.m.Title({text: "A2A Agent Status Test", level: "H1"}),
                    new sap.m.HBox({
                        items: [
                            new sap.m.GenericTile({
                                header: "Data Product Agent",
                                subheader: "Agent 0",
                                frameType: "TwoByOne",
                                tileContent: new sap.m.TileContent({
                                    content: new sap.m.NumericContent({
                                        value: "Loading...",
                                        indicator: "None",
                                        size: "M"
                                    })
                                }),
                                press: function() {
                                    console.log("Tile pressed!");
                                    fetch("/api/v1/agents/0/status")
                                        .then(res => res.json())
                                        .then(data => {
                                            console.log("Agent 0 data:", data);
                                            sap.m.MessageToast.show("Agent 0: " + JSON.stringify(data));
                                        })
                                        .catch(err => {
                                            console.log("Agent 0 error:", err);
                                            sap.m.MessageToast.show("Error: " + err.message);
                                        });
                                }
                            }),
                            new sap.m.GenericTile({
                                header: "Standardization Agent",
                                subheader: "Agent 1", 
                                frameType: "TwoByOne",
                                tileContent: new sap.m.TileContent({
                                    content: new sap.m.NumericContent({
                                        value: "Loading...",
                                        indicator: "None",
                                        size: "M"
                                    })
                                })
                            }),
                            new sap.m.GenericTile({
                                header: "AI Preparation Agent",
                                subheader: "Agent 2",
                                frameType: "TwoByOne", 
                                tileContent: new sap.m.TileContent({
                                    content: new sap.m.NumericContent({
                                        value: "Loading...",
                                        indicator: "None",
                                        size: "M"
                                    })
                                })
                            }),
                            new sap.m.GenericTile({
                                header: "Vector Processing Agent", 
                                subheader: "Agent 3",
                                frameType: "TwoByOne",
                                tileContent: new sap.m.TileContent({
                                    content: new sap.m.NumericContent({
                                        value: "Loading...",
                                        indicator: "None", 
                                        size: "M"
                                    })
                                })
                            })
                        ]
                    })
                ]
            });

            vBox.placeAt("content");

            // Test loading data for first tile
            setTimeout(function() {
                fetch("/api/v1/agents/0/status")
                    .then(res => res.json())
                    .then(data => {
                        console.log("Successfully loaded agent 0 data:", data);
                    })
                    .catch(err => {
                        console.log("Failed to load agent 0 data:", err);
                    });
            }, 2000);
        });
    </script>
</body>
</html>