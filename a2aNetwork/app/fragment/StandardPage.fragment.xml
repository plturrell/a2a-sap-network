<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core">
    
    <!-- SAP Standard DynamicPage Pattern -->
    <f:DynamicPage
        id="{pageId}"
        headerExpanded="{/headerExpanded}"
        showFooter="{/showFooter}"
        class="sapUiResponsiveContentPadding">
        
        <!-- Page Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="{pageTitle}" level="H1"/>
                </f:heading>
                
                <!-- Breadcrumb Navigation -->
                <f:breadcrumbs>
                    <Breadcrumbs visible="{/breadcrumbsVisible}">
                        <core:Fragment fragmentName="{breadcrumbFragment}" type="XML"/>
                    </Breadcrumbs>
                </f:breadcrumbs>
                
                <!-- Page Actions -->
                <f:actions>
                    <core:Fragment fragmentName="a2a.network.launchpad.fragment.StandardActionButtons" type="XML"/>
                </f:actions>
                
                <!-- Navigation Actions -->
                <f:navigationActions>
                    <Button
                        icon="sap-icon://full-screen"
                        type="Transparent"
                        press="onToggleFullScreen"
                        visible="{/fullScreenVisible}"
                        tooltip="{i18n>toggleFullScreen}"/>
                    
                    <Button
                        icon="sap-icon://decline"
                        type="Transparent"
                        press="onClose"
                        visible="{/closeVisible}"
                        tooltip="{i18n>close}"/>
                </f:navigationActions>
                
            </f:DynamicPageTitle>
        </f:title>
        
        <!-- Page Header (Collapsible) -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                
                <!-- Key Info Section -->
                <VBox visible="{/keyInfoVisible}" class="sapUiMediumMarginBottom">
                    <core:Fragment fragmentName="{keyInfoFragment}" type="XML"/>
                </VBox>
                
                <!-- Filter Bar Section -->
                <VBox visible="{/filterBarVisible}" class="sapUiMediumMarginBottom">
                    <core:Fragment fragmentName="{filterBarFragment}" type="XML"/>
                </VBox>
                
                <!-- Search and View Controls -->
                <HBox justifyContent="SpaceBetween" alignItems="Center" class="sapUiMediumMarginBottom">
                    
                    <!-- Search Section -->
                    <HBox alignItems="Center" visible="{/searchVisible}">
                        <SearchField
                            id="searchField"
                            width="20rem"
                            placeholder="{searchPlaceholder}"
                            value="{/searchQuery}"
                            search="onSearch"
                            liveChange="onLiveSearch"
                            class="sapUiTinyMarginEnd"/>
                        
                        <Button
                            icon="sap-icon://filter"
                            type="Transparent"
                            press="onOpenFilterDialog"
                            visible="{/filterVisible}"
                            tooltip="{i18n>filter}"
                            class="sapUiTinyMarginEnd"/>
                    </HBox>
                    
                    <!-- View Controls -->
                    <HBox alignItems="Center" visible="{/viewControlsVisible}">
                        <SegmentedButton
                            selectedKey="{/viewMode}"
                            selectionChange="onViewModeChange"
                            visible="{/viewModeVisible}"
                            class="sapUiTinyMarginEnd">
                            <items>
                                <SegmentedButtonItem key="table" icon="sap-icon://table-view" tooltip="{i18n>tableView}"/>
                                <SegmentedButtonItem key="card" icon="sap-icon://card" tooltip="{i18n>cardView}"/>
                                <SegmentedButtonItem key="grid" icon="sap-icon://grid" tooltip="{i18n>gridView}"/>
                            </items>
                        </SegmentedButton>
                        
                        <Button
                            icon="sap-icon://action-settings"
                            type="Transparent"
                            press="onOpenSettings"
                            visible="{/settingsVisible}"
                            tooltip="{i18n>settings}"/>
                    </HBox>
                    
                </HBox>
                
            </f:DynamicPageHeader>
        </f:header>
        
        <!-- Page Content -->
        <f:content>
            <VBox class="sapUiNoMargin" height="100%">
                
                <!-- Status Messages -->
                <MessageStrip
                    text="{/statusMessage}"
                    type="{/statusType}"
                    visible="{/statusVisible}"
                    showIcon="true"
                    class="sapUiMediumMarginBottom"/>
                
                <!-- Main Content Area -->
                <core:Fragment fragmentName="{contentFragment}" type="XML"/>
                
            </VBox>
        </f:content>
        
        <!-- Page Footer -->
        <f:footer>
            <OverflowToolbar visible="{/footerVisible}">
                <ToolbarSpacer/>
                <core:Fragment fragmentName="{footerFragment}" type="XML"/>
            </OverflowToolbar>
        </f:footer>
        
    </f:DynamicPage>
    
</core:FragmentDefinition>