<core:FragmentDefinition 
    xmlns="sap.m" 
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.ui.layout">
    
    <Dialog id="errorDialog"
           title="{i18n>error}"
           contentWidth="90%"
           maxWidth="40rem"
           contentHeight="auto"
           class="a2a-tablet-dialog"
           type="Message"
           state="Error"
           resizable="true">
        
        <content>
            <VBox class="sapUiMediumMargin">
                <!-- Error Header -->
                <HBox alignItems="Center" class="sapUiMediumMarginBottom">
                    <core:Icon src="sap-icon://error" 
                              size="2.5rem"
                              color="Negative"
                              class="sapUiMediumMarginEnd"/>
                    <VBox>
                        <Title text="{/errorTitle}" level="H3"/>
                        <Text text="{/errorMessage}" class="sapUiSmallMarginTop"/>
                        <Text text="{i18n>errorOccurredAt}: {/timestamp}" 
                              class="sapUiTinyText sapUiSmallMarginTop"/>
                    </VBox>
                </HBox>
                
                <!-- Error Details Expandable Section -->
                <Panel headerText="{i18n>technicalDetails}" 
                      expandable="true"
                      expanded="false"
                      class="sapUiSmallMarginBottom">
                    <VBox class="sapUiSmallMargin">
                        <Label text="{i18n>errorCode}:"/>
                        <Text text="{/errorCode}" class="sapUiMediumMarginBottom"/>
                        
                        <Label text="{i18n>requestId}:"/>
                        <HBox alignItems="Center">
                            <Text text="{/requestId}" class="sapUiMediumMarginEnd"/>
                            <Button icon="sap-icon://copy" 
                                   type="Transparent"
                                   tooltip="{i18n>copyRequestId}"
                                   press="onCopyRequestId"/>
                        </HBox>
                        
                        <Label text="{i18n>stackTrace}:" class="sapUiSmallMarginTop"/>
                        <Text text="{/stackTrace}" 
                             class="a2a-monospace-text sapUiSmallMarginTop"
                             maxLines="10"/>
                    </VBox>
                </Panel>
                
                <!-- Suggested Actions -->
                <Panel headerText="{i18n>suggestedActions}" visible="{/showSuggestions}">
                    <List items="{/suggestions}">
                        <StandardListItem title="{action}" 
                                        description="{description}"
                                        icon="sap-icon://lightbulb"
                                        press="onSuggestionPress"/>
                    </List>
                </Panel>
                
                <!-- Report Issue Section -->
                <MessageStrip text="{i18n>reportIssueMessage}"
                            type="Information"
                            showIcon="true"
                            class="sapUiSmallMarginTop"/>
            </VBox>
        </content>
        
        <beginButton>
            <Button text="{i18n>tryAgain}"
                   type="Emphasized"
                   icon="sap-icon://refresh"
                   press="onRetryAction"
                   visible="{/showRetry}"/>
        </beginButton>
        
        <buttons>
            <Button text="{i18n>reportIssue}"
                   icon="sap-icon://email"
                   press="onReportIssue"/>
            <Button text="{i18n>copyDetails}"
                   icon="sap-icon://copy"
                   press="onCopyErrorDetails"/>
        </buttons>
        
        <endButton>
            <Button text="{i18n>close}"
                   press="onErrorDialogClose"/>
        </endButton>
    </Dialog>
</core:FragmentDefinition>