<mvc:View
    controllerName="a2a.network.fiori.controller.AgentDetail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:uxap="sap.uxap"
    xmlns:form="sap.ui.layout.form"
    xmlns:core="sap.ui.core">
    
    <uxap:ObjectPageLayout
        id="objectPageLayout"
        class="a2a-tablet-page"
        showTitleInHeaderContent="true"
        upperCaseAnchorBar="false">
        <uxap:headerTitle>
            <uxap:ObjectPageDynamicHeaderTitle>
                <uxap:expandedHeading>
                    <Title text="{name}" wrapping="true"/>
                </uxap:expandedHeading>
                <uxap:snappedHeading>
                    <Title text="{name}"/>
                </uxap:snappedHeading>
                <uxap:actions>
                    <Button
                        text="Edit"
                        type="Emphasized"
                        press="onEdit"/>
                    <Button
                        text="Sync"
                        press="onSync"/>
                </uxap:actions>
            </uxap:ObjectPageDynamicHeaderTitle>
        </uxap:headerTitle>
        
        <uxap:headerContent>
            <FlexBox wrap="Wrap" fitContainer="true">
                <Avatar
                    src="sap-icon://person-placeholder"
                    class="sapUiSmallMarginEnd"
                    displaySize="L"/>
                <VBox justifyContent="Center">
                    <Label text="Address:"/>
                    <Text text="{address}"/>
                    <Label text="Endpoint:" class="sapUiTinyMarginTop"/>
                    <Link text="{endpoint}" href="{endpoint}"/>
                </VBox>
                <VBox class="sapUiLargeMarginBegin">
                    <ObjectNumber
                        number="{reputation}"
                        unit="/200"
                        state="{
                            path: 'reputation',
                            formatter: '.formatter.formatReputationState'
                        }"/>
                    <Text text="Reputation Score"/>
                </VBox>
                <VBox class="sapUiLargeMarginBegin">
                    <ObjectStatus
                        text="{= ${isActive} ? 'Active' : 'Inactive' }"
                        state="{= ${isActive} ? 'Success' : 'Error' }"/>
                    <Text text="Status"/>
                </VBox>
            </FlexBox>
        </uxap:headerContent>
        
        <uxap:sections>
            <uxap:ObjectPageSection title="Overview">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection>
                        <uxap:blocks>
                            <form:SimpleForm
                                editable="false"
                                layout="ResponsiveGridLayout">
                                <form:content>
                                    <Label text="Created At"/>
                                    <Text text="{
                                        path: 'createdAt',
                                        formatter: '.formatter.formatDateTime'
                                    }"/>
                                    <Label text="Modified At"/>
                                    <Text text="{
                                        path: 'modifiedAt',
                                        formatter: '.formatter.formatDateTime'
                                    }"/>
                                    <Label text="Created By"/>
                                    <Text text="{createdBy}"/>
                                    <Label text="Modified By"/>
                                    <Text text="{modifiedBy}"/>
                                </form:content>
                            </form:SimpleForm>
                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            
            <uxap:ObjectPageSection title="Capabilities">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection>
                        <uxap:blocks>
                            <Table
                                items="{capabilities}"
                                mode="None">
                                <columns>
                                    <Column>
                                        <Text text="Capability"/>
                                    </Column>
                                    <Column>
                                        <Text text="Version"/>
                                    </Column>
                                    <Column>
                                        <Text text="Status"/>
                                    </Column>
                                    <Column>
                                        <Text text="Registered"/>
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <Text text="{capability/name}"/>
                                            <Text text="{version}"/>
                                            <ObjectStatus
                                                text="{status}"
                                                state="{= ${status} === 'active' ? 'Success' : 'Warning'}"/>
                                            <Text text="{
                                                path: 'registeredAt',
                                                formatter: '.formatter.formatDateTime'
                                            }"/>
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            
            <uxap:ObjectPageSection title="Services">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection>
                        <uxap:blocks>
                            <Table
                                items="{services}"
                                mode="SingleSelectMaster">
                                <columns>
                                    <Column>
                                        <Text text="Service Name"/>
                                    </Column>
                                    <Column>
                                        <Text text="Category"/>
                                    </Column>
                                    <Column>
                                        <Text text="Price"/>
                                    </Column>
                                    <Column>
                                        <Text text="Total Calls"/>
                                    </Column>
                                    <Column>
                                        <Text text="Rating"/>
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <Text text="{name}"/>
                                            <Text text="{category}"/>
                                            <ObjectNumber number="{pricePerCall}" unit="{currency}"/>
                                            <Text text="{totalCalls}"/>
                                            <RatingIndicator value="{averageRating}" editable="false"/>
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
            
            <uxap:ObjectPageSection title="Performance">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection>
                        <uxap:blocks>
                            <VBox>
                                <HBox justifyContent="SpaceAround" class="sapUiMediumMarginBottom">
                                    <VBox alignItems="Center">
                                        <Text text="Total Tasks"/>
                                        <ObjectNumber number="{performance/totalTasks}" emphasized="true"/>
                                    </VBox>
                                    <VBox alignItems="Center">
                                        <Text text="Success Rate"/>
                                        <ObjectNumber 
                                            number="{= Math.round(${performance/successfulTasks} / ${performance/totalTasks} * 100) }"
                                            unit="%"
                                            state="Success"/>
                                    </VBox>
                                    <VBox alignItems="Center">
                                        <Text text="Avg Response Time"/>
                                        <ObjectNumber number="{performance/averageResponseTime}" unit="ms"/>
                                    </VBox>
                                    <VBox alignItems="Center">
                                        <Text text="Avg Gas Usage"/>
                                        <ObjectNumber number="{performance/averageGasUsage}"/>
                                    </VBox>
                                </HBox>
                            </VBox>
                        </uxap:blocks>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
        </uxap:sections>
    </uxap:ObjectPageLayout>
</mvc:View>