<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form">
    
    <Dialog
        id="exportVectorsDialog"
        title="Export Vector Data"
        contentWidth="65%"
        resizable="true"
        draggable="true"
        ariaLabel="Export vector data dialog">
        
        <content>
            <form:SimpleForm
                editable="true"
                layout="ResponsiveGridLayout"
                labelSpanXL="3"
                labelSpanL="3"
                labelSpanM="12"
                labelSpanS="12"
                adjustLabelSpan="false"
                columnsXL="1"
                columnsL="1"
                columnsM="1">
                
                <form:content>
                    <Label text="Export Format" required="true" labelFor="exportFormatSelect"/>
                    <Select 
                        id="exportFormatSelect"
                        selectedKey="{export>/format}"
                        change=".onExportFormatChange"
                        ariaLabel="Select export format">
                        <items>
                            <core:Item key="NUMPY" text="NumPy (.npy) - Python"/>
                            <core:Item key="PARQUET" text="Parquet - Apache Arrow"/>
                            <core:Item key="HDF5" text="HDF5 - Hierarchical Data"/>
                            <core:Item key="CSV" text="CSV - Comma Separated"/>
                            <core:Item key="JSON" text="JSON - JavaScript Object"/>
                            <core:Item key="PICKLE" text="Pickle - Python Binary"/>
                        </items>
                    </Select>
                    
                    <Label text="Include Options"/>
                    <VBox>
                        <CheckBox 
                            text="Include metadata"
                            selected="{export>/includeMetadata}"
                            ariaLabel="Include vector metadata"/>
                        <CheckBox 
                            text="Data validation"
                            selected="{export>/validation}"
                            ariaLabel="Validate data before export"/>
                    </VBox>
                    
                    <Label text="Compression" labelFor="compressionSelect"/>
                    <Select 
                        id="compressionSelect"
                        selectedKey="{export>/compression}"
                        ariaLabel="Select compression type">
                        <items>
                            <core:Item key="NONE" text="No compression"/>
                            <core:Item key="GZIP" text="GZIP"/>
                            <core:Item key="BZIP2" text="BZIP2"/>
                            <core:Item key="LZ4" text="LZ4 (fast)"/>
                            <core:Item key="ZSTD" text="ZSTD (balanced)"/>
                        </items>
                    </Select>
                    
                    <Label text="Chunk Size" labelFor="chunkSizeInput"/>
                    <Input 
                        id="chunkSizeInput"
                        value="{export>/chunkSize}"
                        type="Number"
                        description="Number of vectors per chunk"
                        ariaLabel="Vectors per chunk"/>
                    
                    <Label text="Export Summary"/>
                    <Panel class="sapUiResponsiveMargin">
                        <VBox class="sapUiMediumMargin">
                            <Text text="Task: {path: 'export>/taskName', formatter: '.formatSecureText'}"/>
                            <Text text="Format: {export>/format}"/>
                            <Text text="Compression: {export>/compression}"/>
                            <Text text="Chunk size: {export>/chunkSize} vectors"/>
                        </VBox>
                    </Panel>
                </form:content>
            </form:SimpleForm>
        </content>
        
        <beginButton>
            <Button 
                text="Cancel"
                press=".onCancelExport"
                ariaLabel="Cancel export"/>
        </beginButton>
        
        <endButton>
            <Button 
                text="Export"
                type="Emphasized"
                press=".onExecuteExport"
                enabled="{export>/format}"
                ariaLabel="Execute export"/>
        </endButton>
        
    </Dialog>
    
</core:FragmentDefinition>