<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form">
    
    <Dialog
        id="createDataTaskDialog"
        title="Create Data Management Task"
        contentWidth="70%"
        contentHeight="75%"
        resizable="true">
        
        <content>
            <IconTabBar expandable="false">
                <items>
                    <!-- Basic Information Tab -->
                    <IconTabFilter text="Basic Info" icon="sap-icon://hint">
                        <form:SimpleForm
                            editable="true"
                            layout="ResponsiveGridLayout">
                            <form:content>
                                <Label text="Task Name" required="true"/>
                                <Input 
                                    value="{create>/taskName}"
                                    placeholder="Enter data management task name"/>
                                
                                <Label text="Description"/>
                                <TextArea 
                                    value="{create>/description}"
                                    rows="3"
                                    placeholder="Describe the data management task"/>
                                
                                <Label text="Dataset Name" required="true"/>
                                <Input 
                                    value="{create>/datasetName}"
                                    placeholder="Name of the dataset"
                                    showValueHelp="true"
                                    valueHelpRequest=".onSelectDataset"/>
                                
                                <Label text="Operation Type" required="true"/>
                                <Select selectedKey="{create>/operationType}">
                                    <items>
                                        <core:Item key="STORE" text="Store Data"/>
                                        <core:Item key="RETRIEVE" text="Retrieve Data"/>
                                        <core:Item key="UPDATE" text="Update Data"/>
                                        <core:Item key="DELETE" text="Delete Data"/>
                                        <core:Item key="BACKUP" text="Backup Data"/>
                                        <core:Item key="RESTORE" text="Restore Data"/>
                                        <core:Item key="MIGRATE" text="Migrate Data"/>
                                        <core:Item key="COMPRESS" text="Compress Data"/>
                                        <core:Item key="CACHE" text="Cache Data"/>
                                        <core:Item key="VALIDATE" text="Validate Data"/>
                                    </items>
                                </Select>
                                
                                <Label text="Priority"/>
                                <Select selectedKey="{create>/priority}">
                                    <items>
                                        <core:Item key="LOW" text="Low"/>
                                        <core:Item key="MEDIUM" text="Medium"/>
                                        <core:Item key="HIGH" text="High"/>
                                        <core:Item key="CRITICAL" text="Critical"/>
                                    </items>
                                </Select>
                            </form:content>
                        </form:SimpleForm>
                    </IconTabFilter>
                    
                    <!-- Storage Configuration Tab -->
                    <IconTabFilter text="Storage Config" icon="sap-icon://database">
                        <form:SimpleForm
                            editable="true"
                            layout="ResponsiveGridLayout">
                            <form:content>
                                <Label text="Storage Type"/>
                                <Select selectedKey="{create>/storageType}">
                                    <items>
                                        <core:Item key="HANA" text="SAP HANA"/>
                                        <core:Item key="SQLITE" text="SQLite"/>
                                        <core:Item key="S3" text="Amazon S3"/>
                                        <core:Item key="REDIS" text="Redis"/>
                                        <core:Item key="MEMORY" text="Memory"/>
                                        <core:Item key="FILE" text="File System"/>
                                        <core:Item key="DISTRIBUTED" text="Distributed Storage"/>
                                    </items>
                                </Select>
                                
                                <Label text="Storage Backend"/>
                                <Select 
                                    selectedKey="{create>/storageBackend}"
                                    items="{create>/availableBackends}">
                                    <core:ListItem 
                                        key="{create>backendId}"
                                        text="{create>backendName} ({create>backendType})"/>
                                </Select>
                                
                                <Label text="Compression"/>
                                <VBox>
                                    <CheckBox 
                                        text="Enable compression"
                                        selected="{create>/compressionEnabled}"/>
                                    <Select 
                                        selectedKey="{create>/compressionType}"
                                        visible="{create>/compressionEnabled}">
                                        <items>
                                            <core:Item key="GZIP" text="GZIP"/>
                                            <core:Item key="LZ4" text="LZ4"/>
                                            <core:Item key="SNAPPY" text="Snappy"/>
                                            <core:Item key="ZSTD" text="Zstandard"/>
                                        </items>
                                    </Select>
                                </VBox>
                                
                                <Label text="Encryption"/>
                                <VBox>
                                    <CheckBox 
                                        text="Enable encryption"
                                        selected="{create>/encryptionEnabled}"/>
                                    <Select 
                                        selectedKey="{create>/encryptionType}"
                                        visible="{create>/encryptionEnabled}">
                                        <items>
                                            <core:Item key="AES256" text="AES-256"/>
                                            <core:Item key="AES128" text="AES-128"/>
                                            <core:Item key="RSA" text="RSA"/>
                                        </items>
                                    </Select>
                                </VBox>
                                
                                <Label text="Partitioning Strategy"/>
                                <Select selectedKey="{create>/partitionStrategy}">
                                    <items>
                                        <core:Item key="NONE" text="No Partitioning"/>
                                        <core:Item key="DATE" text="Date-based"/>
                                        <core:Item key="SIZE" text="Size-based"/>
                                        <core:Item key="HASH" text="Hash-based"/>
                                        <core:Item key="RANGE" text="Range-based"/>
                                    </items>
                                </Select>
                            </form:content>
                        </form:SimpleForm>
                    </IconTabFilter>
                    
                    <!-- Cache Configuration Tab -->
                    <IconTabFilter text="Cache Config" icon="sap-icon://performance">
                        <form:SimpleForm
                            editable="true"
                            layout="ResponsiveGridLayout">
                            <form:content>
                                <Label text="Cache Settings"/>
                                <VBox>
                                    <CheckBox 
                                        text="Enable caching"
                                        selected="{create>/cacheEnabled}"/>
                                    <CheckBox 
                                        text="Auto-warm cache"
                                        selected="{create>/autoWarmCache}"
                                        visible="{create>/cacheEnabled}"/>
                                    <CheckBox 
                                        text="Cache on write"
                                        selected="{create>/cacheOnWrite}"
                                        visible="{create>/cacheEnabled}"/>
                                </VBox>
                                
                                <Label text="Cache Level"/>
                                <Select 
                                    selectedKey="{create>/cacheLevel}"
                                    visible="{create>/cacheEnabled}">
                                    <items>
                                        <core:Item key="MEMORY" text="Memory Cache Only"/>
                                        <core:Item key="REDIS" text="Redis Cache Only"/>
                                        <core:Item key="BOTH" text="Memory + Redis"/>
                                        <core:Item key="MULTI_TIER" text="Multi-tier Cache"/>
                                    </items>
                                </Select>
                                
                                <Label text="Cache TTL (minutes)"/>
                                <StepInput 
                                    value="{create>/cacheTTL}"
                                    min="1"
                                    max="1440"
                                    step="5"
                                    visible="{create>/cacheEnabled}"/>
                                
                                <Label text="Cache Eviction Policy"/>
                                <Select 
                                    selectedKey="{create>/evictionPolicy}"
                                    visible="{create>/cacheEnabled}">
                                    <items>
                                        <core:Item key="LRU" text="Least Recently Used"/>
                                        <core:Item key="LFU" text="Least Frequently Used"/>
                                        <core:Item key="FIFO" text="First In, First Out"/>
                                        <core:Item key="TTL" text="Time To Live"/>
                                    </items>
                                </Select>
                                
                                <Label text="Cache Size Limit"/>
                                <VBox visible="{create>/cacheEnabled}">
                                    <HBox>
                                        <Label text="Memory Cache (GB):"/>
                                        <StepInput 
                                            value="{create>/memoryCacheSize}"
                                            min="0.1"
                                            max="64"
                                            step="0.5"/>
                                    </HBox>
                                    <HBox>
                                        <Label text="Redis Cache (GB):"/>
                                        <StepInput 
                                            value="{create>/redisCacheSize}"
                                            min="0.1"
                                            max="256"
                                            step="1"/>
                                    </HBox>
                                </VBox>
                            </form:content>
                        </form:SimpleForm>
                    </IconTabFilter>
                    
                    <!-- Version Control Tab -->
                    <IconTabFilter text="Version Control" icon="sap-icon://version">
                        <form:SimpleForm
                            editable="true"
                            layout="ResponsiveGridLayout">
                            <form:content>
                                <Label text="Versioning"/>
                                <VBox>
                                    <CheckBox 
                                        text="Enable versioning"
                                        selected="{create>/versioningEnabled}"/>
                                    <CheckBox 
                                        text="Auto-create versions"
                                        selected="{create>/autoVersioning}"
                                        visible="{create>/versioningEnabled}"/>
                                    <CheckBox 
                                        text="Incremental backups"
                                        selected="{create>/incrementalBackup}"
                                        visible="{create>/versioningEnabled}"/>
                                </VBox>
                                
                                <Label text="Version Strategy"/>
                                <Select 
                                    selectedKey="{create>/versionStrategy}"
                                    visible="{create>/versioningEnabled}">
                                    <items>
                                        <core:Item key="INCREMENTAL" text="Incremental Changes"/>
                                        <core:Item key="FULL" text="Full Copy"/>
                                        <core:Item key="DELTA" text="Delta Changes Only"/>
                                        <core:Item key="SNAPSHOT" text="Snapshot"/>
                                    </items>
                                </Select>
                                
                                <Label text="Retention Policy"/>
                                <VBox visible="{create>/versioningEnabled}">
                                    <HBox>
                                        <Label text="Retention Days:"/>
                                        <StepInput 
                                            value="{create>/retentionDays}"
                                            min="1"
                                            max="365"
                                            step="1"/>
                                    </HBox>
                                    <HBox>
                                        <Label text="Max Versions:"/>
                                        <StepInput 
                                            value="{create>/maxVersions}"
                                            min="1"
                                            max="100"
                                            step="1"/>
                                    </HBox>
                                </VBox>
                                
                                <Label text="Checksum Validation"/>
                                <VBox visible="{create>/versioningEnabled}">
                                    <CheckBox 
                                        text="Enable checksum validation"
                                        selected="{create>/checksumValidation}"/>
                                    <Select 
                                        selectedKey="{create>/checksumAlgorithm}"
                                        visible="{create>/checksumValidation}">
                                        <items>
                                            <core:Item key="MD5" text="MD5"/>
                                            <core:Item key="SHA1" text="SHA-1"/>
                                            <core:Item key="SHA256" text="SHA-256"/>
                                            <core:Item key="CRC32" text="CRC32"/>
                                        </items>
                                    </Select>
                                </VBox>
                            </form:content>
                        </form:SimpleForm>
                    </IconTabFilter>
                    
                    <!-- Performance Tab -->
                    <IconTabFilter text="Performance" icon="sap-icon://activity-assigned-to-goal">
                        <form:SimpleForm
                            editable="true"
                            layout="ResponsiveGridLayout">
                            <form:content>
                                <Label text="Batch Processing"/>
                                <VBox>
                                    <HBox>
                                        <Label text="Batch Size:"/>
                                        <StepInput 
                                            value="{create>/batchSize}"
                                            min="100"
                                            max="100000"
                                            step="100"/>
                                    </HBox>
                                    <CheckBox 
                                        text="Parallel processing"
                                        selected="{create>/parallelProcessing}"/>
                                    <HBox visible="{create>/parallelProcessing}">
                                        <Label text="Thread Pool Size:"/>
                                        <StepInput 
                                            value="{create>/threadPoolSize}"
                                            min="1"
                                            max="32"
                                            step="1"/>
                                    </HBox>
                                </VBox>
                                
                                <Label text="Connection Pool"/>
                                <VBox>
                                    <HBox>
                                        <Label text="Pool Size:"/>
                                        <StepInput 
                                            value="{create>/connectionPoolSize}"
                                            min="1"
                                            max="100"
                                            step="1"/>
                                    </HBox>
                                    <HBox>
                                        <Label text="Timeout (seconds):"/>
                                        <StepInput 
                                            value="{create>/connectionTimeout}"
                                            min="5"
                                            max="300"
                                            step="5"/>
                                    </HBox>
                                </VBox>
                                
                                <Label text="Optimization"/>
                                <VBox>
                                    <CheckBox 
                                        text="Enable auto-optimization"
                                        selected="{create>/autoOptimization}"/>
                                    <CheckBox 
                                        text="Index optimization"
                                        selected="{create>/indexOptimization}"/>
                                    <CheckBox 
                                        text="Query optimization"
                                        selected="{create>/queryOptimization}"/>
                                    <CheckBox 
                                        text="Memory optimization"
                                        selected="{create>/memoryOptimization}"/>
                                </VBox>
                                
                                <Label text="Monitoring"/>
                                <VBox>
                                    <CheckBox 
                                        text="Enable performance monitoring"
                                        selected="{create>/performanceMonitoring}"/>
                                    <CheckBox 
                                        text="Track throughput metrics"
                                        selected="{create>/trackThroughput}"/>
                                    <CheckBox 
                                        text="Track response times"
                                        selected="{create>/trackResponseTimes}"/>
                                    <CheckBox 
                                        text="Resource utilization tracking"
                                        selected="{create>/trackResourceUsage}"/>
                                </VBox>
                            </form:content>
                        </form:SimpleForm>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </content>
        
        <beginButton>
            <Button 
                text="Cancel"
                press=".onCancelCreateTask"/>
        </beginButton>
        
        <endButton>
            <Button 
                text="Create"
                type="Emphasized"
                press=".onConfirmCreateTask"
                enabled="{= ${create>/taskName} &amp;&amp; ${create>/datasetName} &amp;&amp; ${create>/operationType} }"/>
        </endButton>
        
    </Dialog>
    
</core:FragmentDefinition>