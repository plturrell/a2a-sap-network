<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form">
    
    <Dialog
        id="createDataTaskDialog"
        title="{i18n>dialog.createDataTask}"
        contentWidth="75rem"
        stretch="{device>/system/phone}"
        resizable="true"
        ariaLabelledBy="createDataTaskTitle">
        
        <customHeader>
            <Bar>
                <contentMiddle>
                    <Title id="createDataTaskTitle" text="{i18n>dialog.createDataTask}" level="H2"/>
                </contentMiddle>
            </Bar>
        </customHeader>
        
        <content>
            <IconTabBar expandable="false">
                <items>
                    <!-- Basic Information Tab -->
                    <IconTabFilter text="{i18n>tab.basicInfo}" icon="sap-icon://hint">
                        <form:SimpleForm
                            editable="true"
                            layout="ResponsiveGridLayout">
                            <form:content>
                                <Label text="{i18n>field.taskName}" required="true" labelFor="taskNameInput"/>
                                <Input 
                                    id="taskNameInput"
                                    value="{create>/taskName}"
                                    placeholder="{i18n>placeholder.taskName}"
                                    aria-label="{i18n>aria.datasetNameInput}"
                                    aria-required="true"
                                    valueState="{create>/taskNameState}"
                                    valueStateText="{create>/taskNameStateText}"
                                    liveChange=".onTaskNameChange"/>
                                
                                <Label text="{i18n>field.description}" labelFor="descriptionInput"/>
                                <TextArea 
                                    id="descriptionInput"
                                    value="{create>/description}"
                                    rows="{= ${device>/system/phone} ? 2 : 3 }"
                                    placeholder="{i18n>placeholder.description}"
                                    aria-label="{i18n>aria.descriptionInput}"/>
                                
                                <Label text="{i18n>field.datasetName}" required="true" labelFor="datasetNameInput"/>
                                <Input 
                                    id="datasetNameInput"
                                    value="{create>/datasetName}"
                                    placeholder="{i18n>placeholder.datasetName}"
                                    showValueHelp="true"
                                    valueHelpRequest=".onSelectDataset"
                                    aria-label="{i18n>aria.datasetNameInput}"
                                    aria-required="true"
                                    valueState="{create>/datasetNameState}"
                                    valueStateText="{create>/datasetNameStateText}"
                                    liveChange=".onDatasetNameChange"/>
                                
                                <Label text="{i18n>field.operationType}" required="true" labelFor="operationTypeSelect"/>
                                <Select 
                                    id="operationTypeSelect"
                                    selectedKey="{create>/operationType}"
                                    aria-label="{i18n>aria.operationTypeSelect}"
                                    aria-required="true"
                                    valueState="{create>/operationTypeState}"
                                    valueStateText="{create>/operationTypeStateText}"
                                    change=".onOperationTypeChange">
                                    <core:Item key="" text="{i18n>placeholder.selectOperation}"/>
                                    <core:Item key="STORE" text="{i18n>operation.store}"/>
                                    <core:Item key="RETRIEVE" text="{i18n>operation.retrieve}"/>
                                    <core:Item key="UPDATE" text="{i18n>operation.update}"/>
                                    <core:Item key="DELETE" text="{i18n>operation.delete}"/>
                                    <core:Item key="BACKUP" text="{i18n>operation.backup}"/>
                                    <core:Item key="RESTORE" text="{i18n>operation.restore}"/>
                                    <core:Item key="MIGRATE" text="{i18n>operation.migrate}"/>
                                    <core:Item key="COMPRESS" text="{i18n>operation.compress}"/>
                                    <core:Item key="CACHE" text="{i18n>operation.cache}"/>
                                    <core:Item key="VALIDATE" text="{i18n>operation.validate}"/>
                                </Select>
                                
                                <Label text="{i18n>field.priority}" labelFor="prioritySelect"/>
                                <Select 
                                    id="prioritySelect"
                                    selectedKey="{create>/priority}"
                                    aria-label="{i18n>aria.prioritySelect}">
                                    <items>
                                        <core:Item key="LOW" text="{i18n>priority.low}"/>
                                        <core:Item key="MEDIUM" text="{i18n>priority.medium}"/>
                                        <core:Item key="HIGH" text="{i18n>priority.high}"/>
                                        <core:Item key="CRITICAL" text="{i18n>priority.critical}"/>
                                    </items>
                                </Select>
                            </form:content>
                        </form:SimpleForm>
                    </IconTabFilter>
                    
                    <!-- Storage Configuration Tab -->
                    <IconTabFilter text="{i18n>tab.storageConfig}" icon="sap-icon://database">
                        <form:SimpleForm
                            editable="true"
                            layout="ResponsiveGridLayout">
                            <form:content>
                                <Label text="{i18n>field.storageType}"/>
                                <Select selectedKey="{create>/storageType}">
                                    <items>
                                        <core:Item key="HANA" text="{i18n>storage.hana}"/>
                                        <core:Item key="SQLITE" text="{i18n>storage.sqlite}"/>
                                        <core:Item key="S3" text="{i18n>storage.s3}"/>
                                        <core:Item key="REDIS" text="{i18n>storage.redis}"/>
                                        <core:Item key="MEMORY" text="{i18n>storage.memory}"/>
                                        <core:Item key="FILE" text="{i18n>storage.file}"/>
                                        <core:Item key="DISTRIBUTED" text="{i18n>storage.distributed}"/>
                                    </items>
                                </Select>
                                
                                <Label text="{i18n>field.storageBackend}"/>
                                <Select 
                                    selectedKey="{create>/storageBackend}"
                                    items="{create>/availableBackends}">
                                    <core:ListItem 
                                        key="{create>backendId}"
                                        text="{create>backendName} ({create>backendType})"/>
                                </Select>
                                
                                <Label text="{i18n>field.compression}"/>
                                <VBox>
                                    <CheckBox 
                                        text="{i18n>option.enableCompression}"
                                        selected="{create>/compressionEnabled}"/>
                                    <Select 
                                        selectedKey="{create>/compressionType}"
                                        visible="{create>/compressionEnabled}">
                                        <items>
                                            <core:Item key="GZIP" text="GZIP"/>
                                            <core:Item key="LZ4" text="LZ4"/>
                                            <core:Item key="SNAPPY" text="Snappy"/>
                                            <core:Item key="ZSTD" text="Zstandard"/>
                                        </items>
                                    </Select>
                                </VBox>
                                
                                <Label text="{i18n>field.encryption}"/>
                                <VBox>
                                    <CheckBox 
                                        text="{i18n>option.enableEncryption}"
                                        selected="{create>/encryptionEnabled}"/>
                                    <Select 
                                        selectedKey="{create>/encryptionType}"
                                        visible="{create>/encryptionEnabled}">
                                        <items>
                                            <core:Item key="AES256" text="AES-256"/>
                                            <core:Item key="AES128" text="AES-128"/>
                                            <core:Item key="RSA" text="RSA"/>
                                        </items>
                                    </Select>
                                </VBox>
                                
                                <Label text="{i18n>field.partitionStrategy}"/>
                                <Select selectedKey="{create>/partitionStrategy}">
                                    <items>
                                        <core:Item key="NONE" text="{i18n>partition.none}"/>
                                        <core:Item key="DATE" text="{i18n>partition.date}"/>
                                        <core:Item key="SIZE" text="{i18n>partition.size}"/>
                                        <core:Item key="HASH" text="{i18n>partition.hash}"/>
                                        <core:Item key="RANGE" text="{i18n>partition.range}"/>
                                    </items>
                                </Select>
                            </form:content>
                        </form:SimpleForm>
                    </IconTabFilter>
                    
                    <!-- Cache Configuration Tab -->
                    <IconTabFilter text="{i18n>tab.cacheConfig}" icon="sap-icon://performance">
                        <form:SimpleForm
                            editable="true"
                            layout="ResponsiveGridLayout">
                            <form:content>
                                <Label text="{i18n>field.cacheSettings}"/>
                                <VBox>
                                    <CheckBox 
                                        text="{i18n>option.enableCaching}"
                                        selected="{create>/cacheEnabled}"/>
                                    <CheckBox 
                                        text="{i18n>option.autoWarmCache}"
                                        selected="{create>/autoWarmCache}"
                                        visible="{create>/cacheEnabled}"/>
                                    <CheckBox 
                                        text="{i18n>option.cacheOnWrite}"
                                        selected="{create>/cacheOnWrite}"
                                        visible="{create>/cacheEnabled}"/>
                                </VBox>
                                
                                <Label text="{i18n>field.cacheLevel}"/>
                                <Select 
                                    selectedKey="{create>/cacheLevel}"
                                    visible="{create>/cacheEnabled}">
                                    <items>
                                        <core:Item key="MEMORY" text="{i18n>cache.memoryOnly}"/>
                                        <core:Item key="REDIS" text="{i18n>cache.redisOnly}"/>
                                        <core:Item key="BOTH" text="{i18n>cache.memoryRedis}"/>
                                        <core:Item key="MULTI_TIER" text="{i18n>cache.multiTier}"/>
                                    </items>
                                </Select>
                                
                                <Label text="Cache TTL (minutes)"/>
                                <StepInput 
                                    value="{create>/cacheTTL}"
                                    min="1"
                                    max="1440"
                                    step="5"
                                    visible="{create>/cacheEnabled}"/>
                                
                                <Label text="Cache Eviction Policy"/>
                                <Select 
                                    selectedKey="{create>/evictionPolicy}"
                                    visible="{create>/cacheEnabled}">
                                    <items>
                                        <core:Item key="LRU" text="Least Recently Used"/>
                                        <core:Item key="LFU" text="Least Frequently Used"/>
                                        <core:Item key="FIFO" text="First In, First Out"/>
                                        <core:Item key="TTL" text="Time To Live"/>
                                    </items>
                                </Select>
                                
                                <Label text="Cache Size Limit"/>
                                <VBox visible="{create>/cacheEnabled}">
                                    <HBox>
                                        <Label text="Memory Cache (GB):"/>
                                        <StepInput 
                                            value="{create>/memoryCacheSize}"
                                            min="0.1"
                                            max="64"
                                            step="0.5"/>
                                    </HBox>
                                    <HBox>
                                        <Label text="Redis Cache (GB):"/>
                                        <StepInput 
                                            value="{create>/redisCacheSize}"
                                            min="0.1"
                                            max="256"
                                            step="1"/>
                                    </HBox>
                                </VBox>
                            </form:content>
                        </form:SimpleForm>
                    </IconTabFilter>
                    
                    <!-- Version Control Tab -->
                    <IconTabFilter text="Version Control" icon="sap-icon://version">
                        <form:SimpleForm
                            editable="true"
                            layout="ResponsiveGridLayout">
                            <form:content>
                                <Label text="Versioning"/>
                                <VBox>
                                    <CheckBox 
                                        text="Enable versioning"
                                        selected="{create>/versioningEnabled}"/>
                                    <CheckBox 
                                        text="Auto-create versions"
                                        selected="{create>/autoVersioning}"
                                        visible="{create>/versioningEnabled}"/>
                                    <CheckBox 
                                        text="Incremental backups"
                                        selected="{create>/incrementalBackup}"
                                        visible="{create>/versioningEnabled}"/>
                                </VBox>
                                
                                <Label text="Version Strategy"/>
                                <Select 
                                    selectedKey="{create>/versionStrategy}"
                                    visible="{create>/versioningEnabled}">
                                    <items>
                                        <core:Item key="INCREMENTAL" text="Incremental Changes"/>
                                        <core:Item key="FULL" text="Full Copy"/>
                                        <core:Item key="DELTA" text="Delta Changes Only"/>
                                        <core:Item key="SNAPSHOT" text="Snapshot"/>
                                    </items>
                                </Select>
                                
                                <Label text="Retention Policy"/>
                                <VBox visible="{create>/versioningEnabled}">
                                    <HBox>
                                        <Label text="Retention Days:"/>
                                        <StepInput 
                                            value="{create>/retentionDays}"
                                            min="1"
                                            max="365"
                                            step="1"/>
                                    </HBox>
                                    <HBox>
                                        <Label text="Max Versions:"/>
                                        <StepInput 
                                            value="{create>/maxVersions}"
                                            min="1"
                                            max="100"
                                            step="1"/>
                                    </HBox>
                                </VBox>
                                
                                <Label text="Checksum Validation"/>
                                <VBox visible="{create>/versioningEnabled}">
                                    <CheckBox 
                                        text="Enable checksum validation"
                                        selected="{create>/checksumValidation}"/>
                                    <Select 
                                        selectedKey="{create>/checksumAlgorithm}"
                                        visible="{create>/checksumValidation}">
                                        <items>
                                            <core:Item key="MD5" text="MD5"/>
                                            <core:Item key="SHA1" text="SHA-1"/>
                                            <core:Item key="SHA256" text="SHA-256"/>
                                            <core:Item key="CRC32" text="CRC32"/>
                                        </items>
                                    </Select>
                                </VBox>
                            </form:content>
                        </form:SimpleForm>
                    </IconTabFilter>
                    
                    <!-- Performance Tab -->
                    <IconTabFilter text="Performance" icon="sap-icon://activity-assigned-to-goal">
                        <form:SimpleForm
                            editable="true"
                            layout="ResponsiveGridLayout">
                            <form:content>
                                <Label text="Batch Processing"/>
                                <VBox>
                                    <HBox>
                                        <Label text="Batch Size:"/>
                                        <StepInput 
                                            value="{create>/batchSize}"
                                            min="100"
                                            max="100000"
                                            step="100"/>
                                    </HBox>
                                    <CheckBox 
                                        text="Parallel processing"
                                        selected="{create>/parallelProcessing}"/>
                                    <HBox visible="{create>/parallelProcessing}">
                                        <Label text="Thread Pool Size:"/>
                                        <StepInput 
                                            value="{create>/threadPoolSize}"
                                            min="1"
                                            max="32"
                                            step="1"/>
                                    </HBox>
                                </VBox>
                                
                                <Label text="Connection Pool"/>
                                <VBox>
                                    <HBox>
                                        <Label text="Pool Size:"/>
                                        <StepInput 
                                            value="{create>/connectionPoolSize}"
                                            min="1"
                                            max="100"
                                            step="1"/>
                                    </HBox>
                                    <HBox>
                                        <Label text="Timeout (seconds):"/>
                                        <StepInput 
                                            value="{create>/connectionTimeout}"
                                            min="5"
                                            max="300"
                                            step="5"/>
                                    </HBox>
                                </VBox>
                                
                                <Label text="Optimization"/>
                                <VBox>
                                    <CheckBox 
                                        text="Enable auto-optimization"
                                        selected="{create>/autoOptimization}"/>
                                    <CheckBox 
                                        text="Index optimization"
                                        selected="{create>/indexOptimization}"/>
                                    <CheckBox 
                                        text="Query optimization"
                                        selected="{create>/queryOptimization}"/>
                                    <CheckBox 
                                        text="Memory optimization"
                                        selected="{create>/memoryOptimization}"/>
                                </VBox>
                                
                                <Label text="Monitoring"/>
                                <VBox>
                                    <CheckBox 
                                        text="Enable performance monitoring"
                                        selected="{create>/performanceMonitoring}"/>
                                    <CheckBox 
                                        text="Track throughput metrics"
                                        selected="{create>/trackThroughput}"/>
                                    <CheckBox 
                                        text="Track response times"
                                        selected="{create>/trackResponseTimes}"/>
                                    <CheckBox 
                                        text="Resource utilization tracking"
                                        selected="{create>/trackResourceUsage}"/>
                                </VBox>
                            </form:content>
                        </form:SimpleForm>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </content>
        
        <beginButton>
            <Button 
                text="{i18n>button.cancel}"
                press=".onCancelCreateTask"
                ariaLabel="{i18n>aria.closeDialog}"/>
        </beginButton>
        
        <endButton>
            <Button 
                text="{i18n>button.create}"
                type="Emphasized"
                press=".onConfirmCreateTask"
                enabled="{= ${create>/taskName} &amp;&amp; ${create>/datasetName} &amp;&amp; ${create>/operationType} }"
                ariaLabel="{i18n>aria.saveConfiguration}"
                tooltip="{i18n>tooltip.create}"/>
        </endButton>
        
    </Dialog>
    
</core:FragmentDefinition>