[supervisord]
nodaemon=true
logfile=/app/logs/supervisord.log
childlogdir=/app/logs
user=root

[program:nginx]
command=/usr/sbin/nginx -g 'daemon off;'
autostart=true
autorestart=true
stdout_logfile=/app/logs/nginx.stdout.log
stderr_logfile=/app/logs/nginx.stderr.log
priority=10

[program:startup]
command=/app/start.sh complete
directory=/app
autostart=true
autorestart=false
startsecs=0
startretries=1
stdout_logfile=/app/logs/startup.stdout.log
stderr_logfile=/app/logs/startup.stderr.log
environment=A2A_IN_CONTAINER="true",SKIP_VENV_CREATION="true",STARTUP_MODE="complete"
priority=20

[program:agent0]
command=python3 -m uvicorn main:app --host 0.0.0.0 --port 8000
directory=/app/a2aAgents/backend
autostart=false
autorestart=true
stdout_logfile=/app/logs/agent0.stdout.log
stderr_logfile=/app/logs/agent0.stderr.log
environment=AGENT_ID="agent0",AGENT_PORT="8000"
priority=100

[program:agent1]
command=python3 -m uvicorn main:app --host 0.0.0.0 --port 8001
directory=/app/a2aAgents/backend
autostart=false
autorestart=true
stdout_logfile=/app/logs/agent1.stdout.log
stderr_logfile=/app/logs/agent1.stderr.log
environment=AGENT_ID="agent1",AGENT_PORT="8001"
priority=101

[program:agent2]
command=python3 -m uvicorn main:app --host 0.0.0.0 --port 8002
directory=/app/a2aAgents/backend
autostart=false
autorestart=true
stdout_logfile=/app/logs/agent2.stdout.log
stderr_logfile=/app/logs/agent2.stderr.log
environment=AGENT_ID="agent2",AGENT_PORT="8002"
priority=102

[program:agent3]
command=python3 -m uvicorn main:app --host 0.0.0.0 --port 8003
directory=/app/a2aAgents/backend
autostart=false
autorestart=true
stdout_logfile=/app/logs/agent3.stdout.log
stderr_logfile=/app/logs/agent3.stderr.log
environment=AGENT_ID="agent3",AGENT_PORT="8003"
priority=103

[program:agent4]
command=python3 -m uvicorn main:app --host 0.0.0.0 --port 8004
directory=/app/a2aAgents/backend
autostart=false
autorestart=true
stdout_logfile=/app/logs/agent4.stdout.log
stderr_logfile=/app/logs/agent4.stderr.log
environment=AGENT_ID="agent4",AGENT_PORT="8004"
priority=104

[program:agent5]
command=python3 -m uvicorn main:app --host 0.0.0.0 --port 8005
directory=/app/a2aAgents/backend
autostart=false
autorestart=true
stdout_logfile=/app/logs/agent5.stdout.log
stderr_logfile=/app/logs/agent5.stderr.log
environment=AGENT_ID="agent5",AGENT_PORT="8005"
priority=105

[program:frontend]
command=npm start
directory=/app/a2aAgents/frontend
autostart=false
autorestart=true
stdout_logfile=/app/logs/frontend.stdout.log
stderr_logfile=/app/logs/frontend.stderr.log
environment=PORT="3000"
priority=50

[program:network]
command=npm start
directory=/app/a2aNetwork
autostart=false
autorestart=true
stdout_logfile=/app/logs/network.stdout.log
stderr_logfile=/app/logs/network.stderr.log
environment=PORT="4004"
priority=30

[group:agents]
programs=agent0,agent1,agent2,agent3,agent4,agent5
priority=100

[group:core]
programs=frontend,network
priority=50

[unix_http_server]
file=/var/run/supervisor.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock